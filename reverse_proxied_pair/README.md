# Reverse Proxied Pair of Wikis

## Introduction
[This configuration sets up a pair of wiki instances behind an Nginx reverse proxy.](.)

One is configured as a draft server, the other as a production server. 

The difference between a draft and production sever is that a production server requires a login to edit, but can be viewed by anyone. A draft server requires a login to be viewed. 

Additionally, any pages and pdf generated by a draft server is watermarked to make it clear that it's a draft instance.

## Assumptions
This configuration assumes that Nginx will be able to attach to port 80 of the container host.

What this means is that there can't already be a web server (or any application that serves a web page over the normal http port (so you can get to it at `http://some.address/` as opposed to `http://some.address:8080/`))

It is possible to get this install to share with an existing web server, but this will require config changes to the Nginx container, and to the existing web server which are  beyond the scope of this README

## Getting started - Basic

### Install Docker
If you don't already have it installed

[Instructions are here](https://docs.docker.com/engine/install/)

### Ensure you're in the reverse_proxied_pair directory
Change directory so you're in reverse_proxied_pair

### Create a .env file
`cp example.env .env`

Edit `.env` in your favourite editor, and make any tweaks to it that you prefer. 

### Start the containers
`docker compose up`

## Getting started - Advanced

